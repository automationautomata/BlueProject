#:import Window kivy.core.window.Window
#: include Classes/KivyPatterns.kv


<MainScreen>:

    ExplorerButton:
        id: go_entites_screen
        size: (Window.width / 3 - 2, 50)
        pos: (0, Window.height - 50)
        text: "Entities"
        on_press: screen_manager.current = "entities"

    ExplorerButton:
        id: go_access_rules_screen
        size: (Window.width / 3 - 2, 50)
        pos: (Window.width / 3 + 1, Window.height - 50)
        text: 'Access rules'
        on_press: screen_manager.current = "rules"

    ExplorerButton:
        id: go_logs_screen
        size: (Window.width / 3 - 2, 50)
        pos: (Window.width * 2 / 3 + 2, Window.height - 50)
        text: 'Logs'
        on_press: screen_manager.current = "logs"

    ScreenManager:
        id: screen_manager

        EntitiesScreen:
            id: entities_screen
            name: 'entities'
            size: Window.size

            FloatLayout:
                size_hint: (None, None)
                size: (Window.width - 10, Window.height - 10)

                TableHeader:
                    id: entities_header

                    _grid: entities_header_content
                    _rows: 1
                    _columns: 12

                    _data_titles: ('Card', 'Name (sid)', 'Type', 'Right', 'Right ID', 'Is sabotaged card', 'Date the card was added', 'Date the card was deleted', 'Date the right was added', 'Date the right was deleted', 'Date the entity was added', 'Date the entity was deleted')
                    _data_keys: ('card', 'sid', 'type', 'rightName', 'right', 'isSabotagedCard', 'cardAddDate', 'cardDelDate', 'rightAddDate', 'rightDelDate', 'entityAddDate', 'entityDelDate')

                    GridLayout:
                        id: entities_header_content
                        rows: entities_header._rows
                        cols: entities_header._columns
                        col_default_width: '250dp'
                        col_force_default: True
                        size_hint_x: None
                        width: self.minimum_width

                TableContent:
                    id: entities_table

                    _grid: entities_table_content
                    _header: root.ids.entities_header
                    _rows: 25
                    _columns: 12

                    GridLayout:
                        id: entities_table_content
                        rows: entities_table._rows
                        cols: entities_table._columns
                        row_default_height: '20dp'
                        row_force_default: True
                        size_hint_y: None
                        height: self.minimum_height

                        col_default_width: '250dp'
                        col_force_default: True
                        size_hint_x: None
                        width: self.minimum_width


        RulesScreen:
            id: access_rules_screen
            name: 'rules'
            size: Window.size

            FloatLayout:
                size_hint: (None, None)
                size: (Window.width - 10, Window.height - 10)

                TableHeader:
                    id: access_rules_header

                    _grid: access_rules_header_content
                    _rows: 1
                    _columns: 10

                    _data_titles: ('room', 'roomName', 'roomAddDate', 'roomDeleDate', 'right', 'rightName', 'rightAddDate', 'rightDelDate', 'ruleAddDate', 'ruleDelDate')
                    _data_keys: ('room', 'roomName', 'roomAddDate', 'roomDeleDate', 'right', 'rightName', 'rightAddDate', 'rightDelDate', 'ruleAddDate', 'ruleDelDate')

                    GridLayout:
                        id: access_rules_header_content
                        rows: access_rules_header._rows
                        cols: access_rules_header._columns
                        col_default_width: '250dp'
                        col_force_default: True
                        size_hint_x: None
                        width: self.minimum_width

                TableContent:
                    id: access_rules_table

                    _grid: access_rules_table_content
                    _header: root.ids.access_rules_header
                    _rows: 25
                    _columns: 10

                    GridLayout:
                        id: access_rules_table_content
                        rows: access_rules_table._rows
                        cols: access_rules_table._columns
                        row_default_height: '20dp'
                        row_force_default: True
                        size_hint_y: None
                        height: self.minimum_height

                        col_default_width: '250dp'
                        col_force_default: True
                        size_hint_x: None
                        width: self.minimum_width


        LogsScreen:
            id: logs_screen
            name: 'logs'
            size: Window.size

            FloatLayout:

    Footer:
        id: footer
        ThemeButton:
            id: theme_button
            text: 'T'
            on_press: self.switch_theme(root)

        DomainButton:
            id: domain_button
            text: 'Domain'
            on_press: pass

        SortingButton:
            id: sorting_button
            text: 'Sorting'

        AddRecordButton:
            id: add_record_button
            text: 'Add'
            disabled: root.ids.screen_manager.current == 'logs'

        EditRecordButton:
            id: edit_record_button
            text: 'Edit'
            disabled: root.ids.screen_manager.current == 'logs'

        DeleteRecordButton:
            id: delete_record_button
            text: 'Delete'
            disabled: root.ids.screen_manager.current == 'logs'

        CardsListButton:
            id: cards_list_button
            text: 'Cards'

        RoomsListButton:
            id: rooms_list_button
            text: 'Rooms'

        RightsListButton:
            id: rights_list_button
            text: 'Rights'